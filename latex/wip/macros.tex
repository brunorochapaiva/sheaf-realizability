%% Macros

%% Macro to superimpose two symbols
\makeatletter
\newcommand{\superimpose}[3][\mathord]{#1{\mathpalette\superimpose@{{#2}{#3}}}}
\newcommand{\superimpose@}[2]{\superimpose@@{#1}#2}
\newcommand{\superimpose@@}[3]{%
  \ooalign{%
    \hfil$\m@th#1#2$\hfil\cr
    \hfil$\m@th#1#3$\hfil\cr
  }%
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% GENERAL MATHEMATICAL NOTATION %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Used in the vernacular to mark a term being defined.
%% Currently, does nothing else besides making the term italic.
%% But itâ€™s still nice to provide a layer of abstraction for this purpose.
%% It may be used, for example, to add things to the index.
\newcommand{\definiendum}[1]{\textbf{#1}}

\newcommand{\IsDefined}{\mathbin{\vcentcolon\equiv}}

%% General one letter notations
\newcommand{\A}{\ensuremath{\mathsf{A}}} % arbitrary PCA
\newcommand{\C}{\ensuremath{\mathcal{C}}} % arbitrary category
\renewcommand{\P}{\ensuremath{{P}}} % arbitrary poset (replaces paragraph symbol)
\renewcommand{\L}{\ensuremath{{L}}} % arbitrary lattice
\newcommand{\X}{\ensuremath{X}} % arbitrary sheaf
\newcommand{\E}{\mathcal{E}} % arbitrary topos
\newcommand{\Ej}{\mathcal{E}_\IBoxSym} % arbitrary topos of sheaves

\newcommand{\Par}[1]{{#1}_\bot}
\newcommand{\ParTo}{\rightharpoonup}
\newcommand{\ParCat}[1]{{#1}^\ParTo}

\newcommand{\PresheafCat}{\hat{\C}}

\newcommand{\Sub}[1]{\mathsf{Sub}({#1})}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% VERNACULAR COMMANDS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\SystemT}{\textsc{System T}}
\newcommand{\MLTT}{\textsc{MLTT}}
\newcommand{\Agda}{\textsc{Agda}}
\newcommand{\Boxtt}{\textsc{BoxTT}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% DECORATION %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setlength{\ULdepth}{3pt}
\contourlength{1pt}
\newcommand{\underlinehelper}[3]{
  \colorbox{#2}{
  #1{\phantom{#3}}%
  \llap{\contour{#2}{#3}}%
  }
}
\newcommand{\hla}[1]{\underlinehelper{\uline}{pink}{#1}}
\newcommand{\hlb}[1]{\underlinehelper{\uwave}{yellow}{#1}}
\newcommand{\hlc}[1]{\underlinehelper{\uuline}{pink}{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% EXTERNAL %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Eval map
\newcommand{\EEval}{\mathsf{ev}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% INTERNAL %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Logical language

\newcommand{\ITop}{\top}

\newcommand{\IBot}{\bot}

\newcommand{\INotSym}{\lnot}
\newcommand{\INot}[1]{\INotSym{#1}}

\newcommand{\IAndSym}{\land}
\newcommand{\IAnd}[2]{{#1}\IAndSym{#2}}

\newcommand{\IOrSym}{\lor}
\newcommand{\IOr}[2]{{#1}\IOrSym{#2}}

\newcommand{\IImpliesSym}{\Rightarrow}
\newcommand{\IImplies}[2]{{#1}\IImpliesSym{#2}}

\newcommand{\IForallSym}{\forall}
\newcommand{\IForall}[2]{\IForallSym{#1}.\,{#2}}

\newcommand{\IExistsSym}{\exists}
\newcommand{\IExists}[2]{\IExistsSym{#1}.\,{#2}}

\newcommand{\IBoxSym}{\Box}
\newcommand{\IBox}[1]{\IBoxSym{#1}}

\newcommand{\ISetComp}[2]{\{{#1}\mid{#2}\}}

\newcommand{\IEqSym}{=}
\newcommand{\IEq}[2]{{#1}\IEqSym{#2}}

% Types
\newcommand{\IPower}[1]{\mathcal{P}{#1}}
\newcommand{\IPowerCl}[1]{\mathcal{P}_{\IBoxSym}{#1}}
\newcommand{\IProp}{\Omega}
\newcommand{\IPropCl}{\Omega_\IBoxSym}
\newcommand{\IHolds}[1]{|{#1}|}

%% Universe
\newcommand{\IUni}{\mathcal{U}}

%% Empty type
\newcommand{\IEmpty}{\mathbb{0}}
\newcommand{\IEmptyM}[1]{!_{#1}}

%% Unit type
\newcommand{\IUnit}{\mathbb{1}}
\newcommand{\IUnitM}[1]{{\langle\rangle}_{#1}}

%% Product types
\newcommand{\IProd}[2]{{#1}\times{#2}}
\newcommand{\IFst}{\pi_0}
\newcommand{\ISnd}{\pi_1}
\newcommand{\IPair}[2]{\langle{#1},{#2}\rangle} % pairing operator
\newcommand{\IPairBi}[2]{{#1}\times{#2}} % bifunctor action of products

%% Equaliser types
\newcommand{\IEqualiser}[2]{\mathsf{Eq({#1,#2})}}

%% Function types
\newcommand{\IFun}[2]{{{#1}\to{#2}}}
\newcommand{\ILam}[2]{{\mathop{\lambda({#1}).}{#2}}}

\newcommand{\IId}[1]{\mathbb{1}_{#1}}

% INTERNAL PCA

%% Partial application
\newcommand{\IApSym}{\cdot}
\newcommand{\IAp}[2]{{#1}\IApSym{#2}}

%% Polynomial application
\newcommand{\IPApSym}{\cdot}
\newcommand{\IPAp}[2]{{#1}\IPApSym{#2}}

%% Polynomial abstraction
\newcommand{\IAbs}[2]{\Lambda{#1}.\,{#2}}

%% Partial element ordering
\newcommand{\IPLeqSym}{\preccurlyeq}
\newcommand{\IPLeq}[2]{{#1}\IPLeqSym{#2}}

\newcommand{\IPSimSym}{\simeq}
\newcommand{\IPSim}[2]{{#1}\IPSimSym{#2}}

\newcommand{\IIdentCode}{\texttt{id}}

\newcommand{\ICompCode}{\texttt{comp}}

%% Pairing
\newcommand{\IPairCode}{\texttt{pair}}
\newcommand{\IFstCode}{\texttt{p}_0}
\newcommand{\ISndCode}{\texttt{p}_1}

%% Disjoint unions
\newcommand{\ILeftCode}{\texttt{in}_0}
\newcommand{\IRightCode}{\texttt{in}_1}
\newcommand{\IMatchCode}{\texttt{match}}


%% Sheafification
\newcommand{\ISheafSym}{\mathcal{D}}
\newcommand{\ISheaf}[1]{\ISheafSym{#1}}

\newcommand{\ISheafExt}[1]{{#1}^\sharp}
\newcommand{\ISheafExtM}[2]{{#1}^{({#2})}}
\newcommand{\IRPExt}[1]{\ISheafExtM{#1}{\sharp,-}}

\newcommand{\ISheafIndSym}{\mathcal{D}_\text{ind}}
\newcommand{\ISheafInd}[1]{\ISheafIndSym\,{#1}}

\newcommand{\IGlueSym}{\text{glue}}
\newcommand{\IGlue}[1]{\IGlueSym_{#1}}

\newcommand{\ILeafSym}{\eta}
\newcommand{\ILeaf}[1]{\eta\,{#1}}

\newcommand{\IBranchSym}{\beta}
\newcommand{\IBranch}[3]{\beta(#1,#2,#3)}

%% Lifting monad

\newcommand{\IPar}[1]{{#1}_\bot}
\newcommand{\ITotal}[1]{{{#1}\!\downarrow}}
\newcommand{\IValSym}{\text{value}}
\newcommand{\IVal}[1]{\IValSym\,{#1}}

\newcommand{\ISquashSym}{{\Downarrow}}
\newcommand{\ISquash}[1]{\ISquashSym\,{#1}}

\newcommand{\IParExtSym}{\Diamond}
\newcommand{\IParExt}[1]{\IParExtSym{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% TRIPOS %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Tripos
\newcommand{\Trip}{T_\IBoxSym}

%% Realizability Predicates
\newcommand{\IRealPred}[1]{\IFun{#1}{\IFun{\A}{\IPropCl}}}
\newcommand{\RealPred}[1]{{\color{red}change!}}

%% Evidence predicate
\newcommand{\IEvidenceSym}{\IEvidence{(-)}{(-)}}
\newcommand{\IEvidence}[2]{\text{evidences}_{{#1}\leq{#2}}}

% Tripos language

%% Helper macro to tag tripos language symbols with the object type
\newcommand{\TagWithObject}[2]{\overset{\scriptscriptstyle #2}{#1}}

\newcommand{\TTop}[1]{\TagWithObject{\top}{#1}}

\newcommand{\TBot}[1]{\TagWithObject{\bot}{#1}}

\newcommand{\TAndSym}[1]{\TagWithObject{\land}{#1}}
\newcommand{\TAnd}[3]{{#1}\TAndSym{#3}{#2}}

\newcommand{\TOrSym}[1]{\TagWithObject{\lor}{#1}}
\newcommand{\TOr}[3]{{#1}\TOrSym{#3}{#2}}

\newcommand{\TImpliesSym}[1]{\TagWithObject{\Rightarrow}{#1}}
\newcommand{\TImplies}[3]{{#1}\TImpliesSym{#3}{#2}}

\newcommand{\TPull}[1]{{#1}^\ast}
\newcommand{\TExists}[1]{\exists_{#1}}
\newcommand{\TForall}[1]{\forall_{#1}}

%% Category of assemblies
\newcommand{\AsmSym}{\mathbf{Asm}}
\newcommand{\Asm}[3]{\AsmSym_{(#2,#3)}(#1)}
\newcommand{\AsmCat}{\Asm{\A}{\E}{\Box}}

\newcommand{\Adj}[2]{{#1}[{#2}]}
